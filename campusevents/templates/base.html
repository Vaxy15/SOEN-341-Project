<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{% block title %}Campus Events{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #f7f7fb; --panel:#fff; --text:#111; --muted:#666; --border:#e6e6ef; --primary:#3b82f6;
    }
    * { box-sizing: border-box }
    body { margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Arial, sans-serif; color:var(--text); background:var(--bg); }
    a { color: var(--primary); text-decoration: none; }
    header { background:var(--panel); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:10; }
    .container { max-width: 1100px; margin: 0 auto; padding: 0 16px; }
    .topnav { display:flex; align-items:center; justify-content:space-between; height:56px; }
    .brand { font-weight:700; }
    nav ul { list-style:none; display:flex; gap:12px; padding:0; margin:0; }
    nav a, nav button { display:inline-block; padding:8px 10px; border-radius:10px; border:1px solid transparent; background:transparent; color:inherit; cursor:pointer; }
    nav a:hover, nav button:hover { background:#eef4ff; border-color:#dbe8ff; }
    main { padding: 18px 0 32px; }
    .messages { margin: 12px 0; }
    .msg { background:#fff; border:1px solid var(--border); border-left:4px solid var(--primary); padding:10px 12px; border-radius:10px; box-shadow:0 6px 18px rgba(20,20,45,.05); }
    footer { color:var(--muted); font-size:13px; padding:18px 0; border-top:1px solid var(--border); }
    .btn { padding:8px 12px; border:1px solid var(--border); border-radius:10px; background:#fff; }
    .btn-primary { background:var(--primary); color:#fff; border-color:var(--primary); }
  </style>
  {% block head_extra %}{% endblock %}
</head>
<body>
  <header>
    <div class="container">
      <div class="topnav">
        <div class="brand"><a href="{% url 'event_list_page' %}">Campus Events</a></div>
        <nav>
          <ul>
            <li><a href="{% url 'event_list_page' %}">Discover</a></li>

            {% if request.user.is_authenticated %}
              <li><a href="{% url 'my_events' %}">My Events</a></li>

              {% if request.user.role == 'organizer' or request.user.role == 'admin' %}
                <li><a href="{% url 'organizer_my_events' %}">Organizer</a></li>
              {% endif %}

              {# ---- Admin-only links ---- #}
              {% if request.user.role == 'admin' %}
                <li><a href="{% url 'admin_dashboard_page' %}">Dashboard</a></li>
                <li><a href="{% url 'admin:index' %}">Django Admin</a></li>
              {% endif %}

              <li>
                <form action="{% url 'logout' %}" method="post" style="display:inline">
                  {% csrf_token %}
                  <button type="submit" class="btn">Logout</button>
                </form>
              </li>
            {% else %}
              <li><a href="{% url 'login' %}">Login</a></li>
              <li><a href="{% url 'register' %}">Register</a></li>
            {% endif %}
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <main class="container">
    {% if messages %}
      <div class="messages">
        {% for message in messages %}
          <div class="msg">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}

    {% block content %}{% endblock %}
  </main>

  <footer>
    <div class="container">
      Â© {{ now|date:"Y" }} Campus Events
    </div>
  </footer>
</body>
</html>
